Array.prototype.indexOf||(Array.prototype.indexOf=function(a){"use strict";if(this===void 0||this===null)throw new TypeError;var b=Object(this),c=b.length>>>0;if(c===0)return-1;var d=0;arguments.length>0&&(d=Number(arguments[1]),d!==d?d=0:d!==0&&d!==Infinity&&d!==-Infinity&&(d=(d>0||-1)*Math.floor(Math.abs(d))));if(d>=c)return-1;var e=d>=0?d:Math.max(c-Math.abs(d),0);for(;e<c;e++)if(e in b&&b[e]===a)return e;return-1});var I18n=I18n||{};I18n.defaultLocale="en",I18n.fallbacks=!1,I18n.defaultSeparator=".",I18n.locale=null,I18n.PLACEHOLDER=/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,I18n.fallbackRules={},I18n.pluralizationRules={en:function(a){return a==0?["zero","none","other"]:a==1?"one":"other"}},I18n.getFallbacks=function(a){if(a===I18n.defaultLocale)return[];if(!I18n.fallbackRules[a]){var b=[],c=a.split("-");for(var d=1;d<c.length;d++)b.push(c.slice(0,d).join("-"));b.push(I18n.defaultLocale),I18n.fallbackRules[a]=b}return I18n.fallbackRules[a]},I18n.isValidNode=function(a,b,c){return a[b]!==null&&a[b]!==c},I18n.lookup=function(a,b){var b=b||{},c=a,d=this.prepareOptions(I18n.translations),e=b.locale||I18n.currentLocale(),f=d[e]||{},b=this.prepareOptions(b),g;typeof a=="object"&&(a=a.join(this.defaultSeparator)),b.scope&&(a=b.scope.toString()+this.defaultSeparator+a),a=a.split(this.defaultSeparator);while(f&&a.length>0)g=a.shift(),f=f[g];if(!f){if(I18n.fallbacks){var h=this.getFallbacks(e);for(var i=0;i<h.length;h++){f=I18n.lookup(c,this.prepareOptions({locale:h[i]},b));if(f)break}}!f&&this.isValidNode(b,"defaultValue")&&(f=b.defaultValue)}return f},I18n.prepareOptions=function(){var a={},b,c=arguments.length;for(var d=0;d<c;d++){b=arguments[d];if(!b)continue;for(var e in b)this.isValidNode(a,e)||(a[e]=b[e])}return a},I18n.interpolate=function(a,b){b=this.prepareOptions(b);var c=a.match(this.PLACEHOLDER),d,e,f;if(!c)return a;for(var g=0;d=c[g];g++)f=d.replace(this.PLACEHOLDER,"$1"),e=b[f],this.isValidNode(b,f)||(e="[missing "+d+" value]"),regex=new RegExp(d.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}")),a=a.replace(regex,e);return a},I18n.translate=function(a,b){b=this.prepareOptions(b);var c=this.lookup(a,b);try{return typeof c=="object"?typeof b.count=="number"?this.pluralize(b.count,a,b):c:this.interpolate(c,b)}catch(d){return this.missingTranslation(a)}},I18n.localize=function(a,b){switch(a){case"currency":return this.toCurrency(b);case"number":return a=this.lookup("number.format"),this.toNumber(b,a);case"percentage":return this.toPercentage(b);default:return a.match(/^(date|time)/)?this.toTime(a,b):b.toString()}},I18n.parseDate=function(a){var b,c;if(typeof a=="object")return a;b=a.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2}))?(Z|\+0000)?/);if(b){for(var d=1;d<=6;d++)b[d]=parseInt(b[d],10)||0;b[2]-=1,b[7]?c=new Date(Date.UTC(b[1],b[2],b[3],b[4],b[5],b[6])):c=new Date(b[1],b[2],b[3],b[4],b[5],b[6])}else typeof a=="number"?(c=new Date,c.setTime(a)):a.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/)?(c=new Date,c.setTime(Date.parse(a))):(c=new Date,c.setTime(Date.parse(a)));return c},I18n.toTime=function(a,b){var c=this.parseDate(b),d=this.lookup(a);return c.toString().match(/invalid/i)?c.toString():d?this.strftime(c,d):c.toString()},I18n.strftime=function(a,b){var c=this.lookup("date");if(!c)return a.toString();c.meridian=c.meridian||["AM","PM"];var d=a.getDay(),e=a.getDate(),f=a.getFullYear(),g=a.getMonth()+1,h=a.getHours(),i=h,j=h>11?1:0,k=a.getSeconds(),l=a.getMinutes(),m=a.getTimezoneOffset(),n=Math.floor(Math.abs(m/60)),o=Math.abs(m)-n*60,p=(m>0?"-":"+")+(n.toString().length<2?"0"+n:n)+(o.toString().length<2?"0"+o:o);i>12?i=i-12:i===0&&(i=12);var q=function(a){var b="0"+a.toString();return b.substr(b.length-2)},r=b;return r=r.replace("%a",c.abbr_day_names[d]),r=r.replace("%A",c.day_names[d]),r=r.replace("%b",c.abbr_month_names[g]),r=r.replace("%B",c.month_names[g]),r=r.replace("%d",q(e)),r=r.replace("%e",e),r=r.replace("%-d",e),r=r.replace("%H",q(h)),r=r.replace("%-H",h),r=r.replace("%I",q(i)),r=r.replace("%-I",i),r=r.replace("%m",q(g)),r=r.replace("%-m",g),r=r.replace("%M",q(l)),r=r.replace("%-M",l),r=r.replace("%p",c.meridian[j]),r=r.replace("%S",q(k)),r=r.replace("%-S",k),r=r.replace("%w",d),r=r.replace("%y",q(f)),r=r.replace("%-y",q(f).replace(/^0+/,"")),r=r.replace("%Y",f),r=r.replace("%z",p),r},I18n.toNumber=function(a,b){b=this.prepareOptions(b,this.lookup("number.format"),{precision:3,separator:".",delimiter:",",strip_insignificant_zeros:!1});var c=a<0,d=Math.abs(a).toFixed(b.precision).toString(),e=d.split("."),f,g=[],h;a=e[0],f=e[1];while(a.length>0)g.unshift(a.substr(Math.max(0,a.length-3),3)),a=a.substr(0,a.length-3);h=g.join(b.delimiter),b.precision>0&&(h+=b.separator+e[1]),c&&(h="-"+h);if(b.strip_insignificant_zeros){var i={separator:new RegExp(b.separator.replace(/\./,"\\.")+"$"),zeros:/0+$/};h=h.replace(i.zeros,"").replace(i.separator,"")}return h},I18n.toCurrency=function(a,b){return b=this.prepareOptions(b,this.lookup("number.currency.format"),this.lookup("number.format"),{unit:"$",precision:2,format:"%u%n",delimiter:",",separator:"."}),a=this.toNumber(a,b),a=b.format.replace("%u",b.unit).replace("%n",a),a},I18n.toHumanSize=function(a,b){var c=1024,d=a,e=0,f,g;while(d>=c&&e<4)d=d/c,e+=1;return e===0?(f=this.t("number.human.storage_units.units.byte",{count:d}),g=0):(f=this.t("number.human.storage_units.units."+[null,"kb","mb","gb","tb"][e]),g=d-Math.floor(d)===0?0:1),b=this.prepareOptions(b,{precision:g,format:"%n%u",delimiter:""}),a=this.toNumber(d,b),a=b.format.replace("%u",f).replace("%n",a),a},I18n.toPercentage=function(a,b){return b=this.prepareOptions(b,this.lookup("number.percentage.format"),this.lookup("number.format"),{precision:3,separator:".",delimiter:""}),a=this.toNumber(a,b),a+"%"},I18n.pluralizer=function(a){return pluralizer=this.pluralizationRules[a],pluralizer!==undefined?pluralizer:this.pluralizationRules.en},I18n.findAndTranslateValidNode=function(a,b){for(i=0;i<a.length;i++){key=a[i];if(this.isValidNode(b,key))return b[key]}return null},I18n.pluralize=function(a,b,c){var d;try{d=this.lookup(b,c)}catch(e){}if(!d)return this.missingTranslation(b);var f;return c=this.prepareOptions(c),c.count=a.toString(),pluralizer=this.pluralizer(this.currentLocale()),key=pluralizer(Math.abs(a)),keys=typeof key=="object"&&key instanceof Array?key:[key],f=this.findAndTranslateValidNode(keys,d),f==null&&(f=this.missingTranslation(b,keys[0])),this.interpolate(f,c)},I18n.missingTranslation=function(){var a='[missing "'+this.currentLocale(),b=arguments.length;for(var c=0;c<b;c++)a+="."+arguments[c];return a+='" translation]',a},I18n.currentLocale=function(){return I18n.locale||I18n.defaultLocale},I18n.t=I18n.translate,I18n.l=I18n.localize,I18n.p=I18n.pluralize