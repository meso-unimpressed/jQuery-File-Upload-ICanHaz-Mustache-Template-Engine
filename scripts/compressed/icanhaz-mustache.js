$.widget("blueimpUIX.fileupload",$.blueimpUI.fileupload,{options:{templateEngine:"",uploadTemplateId:"templateUpload",downloadTemplateId:"templateDownload",downloadTemplate:function(a){var b=$.blueimpUI.fileupload.detectTemplateEngine(a);return a.locale=$.blueimpUI.fileupload._locale,b=="icanhaz"?ich[a.options.downloadTemplateId](a):b=="mustache"?Mustache.render(a,[a.options.downloadTemplateId]):!1},uploadTemplate:function(a){var b=$.blueimpUI.fileupload.detectTemplateEngine(a);return a.locale=$.blueimpUI.fileupload._locale,b=="icanhaz"?ich[a.options.uploadTemplateId](a):b=="mustache"?Mustache.render(a,[a.options.uploadTemplateId]):!1}},_formatFileSize:function(){return function(a,b){var c=Number(b(a));return isNaN(c)?"":$.blueimpUI.fileupload.prototype._formatFileSize.call(this,c)}}}),$.extend($.blueimpUI.fileupload,{detectTemplateEngine:function(a){var b=a.options.templateEngine;typeof b=="string"?b=b.toLowerCase():b="";if(b=="mustache"||b=="icanhaz")return b;try{typeof ich=="object"&&(a.options.templateEngine="ICanHaz")}catch(c){try{typeof Mustache=="object"&&(a.options.templateEngine="Mustache")}catch(c){throw{name:"Missing Library",message:"Neither ICanHaz nor Mustache.js is available"}}}return a.options.templateEngine.toLowerCase()},_locale:function(){return function(a,b){return I18n.t($.trim(String(b(a))))}}})